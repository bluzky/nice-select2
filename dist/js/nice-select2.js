!function(c,l){"object"==typeof exports&&"object"==typeof module?module.exports=l():"function"==typeof define&&define.amd?define([],l):"object"==typeof exports?exports.NiceSelect=l():c.NiceSelect=l()}(self,()=>(()=>{"use strict";var __webpack_modules__={462:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bind: () => (/* binding */ bind),\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst triggerEvent      = (el, type, init = {}) => {\r\n  let EventConstructor;\r\n  if (type === "click") {\r\n    EventConstructor = MouseEvent;\r\n  } else if (type === "change") {\r\n    EventConstructor = Event;\r\n  } else if (type.includes("focus")) {\r\n    EventConstructor = FocusEvent;\r\n  } else {\r\n    EventConstructor = UIEvent;\r\n  }\r\n  const event = new EventConstructor(type, {\r\n    bubbles: true,\r\n    cancelable: false,\r\n    ...init,\r\n  });\r\n  el.dispatchEvent(event);\r\n};\r\n\r\nconst triggerClick      = (el) => triggerEvent(el, "click");\r\nconst triggerChange     = (el) => triggerEvent(el, "change");\r\nconst triggerFocusIn    = (el) => triggerEvent(el, "focusin");\r\nconst triggerFocusOut   = (el) => triggerEvent(el, "focusout");\r\nconst triggerModalOpen  = (el) => triggerEvent(el, "modalopen");\r\nconst triggerModalClose = (el) => triggerEvent(el, "modalclose");\r\n\r\nconst attr              = (el, key) => el[key] !== undefined ? el[key] : el.getAttribute(key);\r\nconst data              = (el, key) => el.getAttribute("data-" + key);\r\nconst hasClass          = (el, className) => el?.classList.contains(className);\r\nconst addClass          = (el, className) => el?.classList.add(className);\r\nconst removeClass       = (el, className) => el?.classList.remove(className);\r\n\r\nconst defaultOptions = {\r\n  data: null,\r\n  searchable: true,\r\n  showSelectedItems: true,\r\n  placeholder: "Select an option",\r\n  searchtext: "Search",\r\n  selectedtext: "selected",\r\n  hideSelect: true\r\n};\r\n\r\nclass NiceSelect {\r\n  constructor(element, options = {}) {\r\n    if (!element) {\r\n      throw new Error(\'No element provided to NiceSelect\');\r\n    }\r\n\r\n    if (!(element instanceof Element)) {\r\n      throw new Error(\'Invalid element provided to NiceSelect - must be a valid DOM element\');\r\n    }\r\n\r\n    this.el               = element;\r\n    this.el._niceSelect   = this;\r\n    this.config           = { ...defaultOptions, ...options };\r\n    this.data             = this.config.data;\r\n    this.selectedOptions  = [];\r\n    this.placeholder      = attr(this.el, "placeholder") || this.config.placeholder;\r\n    this.searchtext       = attr(this.el, "searchtext") || this.config.searchtext;\r\n    this.selectedtext     = attr(this.el, "selectedtext") || this.config.selectedtext;\r\n    this.dropdown         = null;\r\n    this.selectionList    = null;\r\n    this.multiple         = attr(this.el, "multiple");\r\n    this.disabled         = attr(this.el, "disabled");\r\n    this.create();\r\n\r\n    this.bindElementEvents();\r\n  }\r\n\r\n  create(initial=true) {\r\n    this.data ? this.processData(this.data) : this.extractData(initial);\r\n    this.el.classList.remove(\'hidden-select\');\r\n    this.renderDropdown();\r\n\r\n    if(this.config.hideSelect){\r\n      this.el.classList.add(\'hidden-select\');\r\n    }\r\n    this.bindDropdownEvents();\r\n  }\r\n\r\n  processData(data) {\r\n    this.options = data.map((item) => ({\r\n      data: item,\r\n      attributes: {\r\n        selected: !!item.selected,\r\n        disabled: !!item.disabled,\r\n        optgroup: item.value === "optgroup",\r\n      },\r\n    }));\r\n  }\r\n\r\n  extractData(initial) {\r\n    const options = Array.from(this.el.querySelectorAll("option,optgroup"));\r\n    const allOptions = [];\r\n    const selectedOptions = [];\r\n\r\n    this.data = options.map((item) => {\r\n      let itemData;\r\n\r\n      let selected  = item.selected;\r\n\r\n      // First item is marked as selected on default selects\r\n      if(initial && item.selected && !item.defaultSelected){\r\n        selected = false;\r\n      }\r\n\r\n      if (item.tagName === "OPTGROUP") {\r\n        itemData = { text: item.label, value: "optgroup" };\r\n      } else {\r\n        const text = item.dataset.display ?? item.innerText;\r\n        itemData = {\r\n          text,\r\n          value: item.value,\r\n          extra: item.dataset.extra,\r\n          selected: selected,\r\n          disabled: item.disabled,\r\n        };\r\n      }\r\n\r\n      const attributes = {\r\n        selected: selected,\r\n        disabled: item.disabled,\r\n        optgroup: item.tagName === "OPTGROUP",\r\n      };\r\n\r\n      const optionObj = { data: itemData, attributes, element: null };\r\n\r\n      allOptions.push(optionObj);\r\n\r\n      if (attributes.selected) selectedOptions.push(optionObj);\r\n\r\n      return itemData;\r\n    });\r\n\r\n    this.options          = allOptions;\r\n    this.selectedOptions  = selectedOptions;\r\n  }\r\n\r\n  renderDropdown() {\r\n    const classes = [\r\n      "nice-select",\r\n      attr(this.el, "class") || "",\r\n      this.disabled ? "disabled" : "",\r\n      this.multiple ? "has-multiple" : "",\r\n    ].filter(Boolean);\r\n\r\n    const searchHtml = this.config.searchable\r\n      ? `\r\n      <div class="nice-select-search-box">\r\n        <input type="text" class="nice-select-search" placeholder="${this.searchtext}..." title="search"/>\r\n      </div>\r\n    `\r\n      : "";\r\n\r\n    const html = `\r\n      <div class="${classes.join(" ")}" tabindex="${this.disabled ? "" : 0}">\r\n        <span class="${this.multiple ? "multiple-options" : "current"}"></span>\r\n        <div class="nice-select-dropdown">\r\n          ${searchHtml}\r\n          <ul class="list"></ul>\r\n        </div>\r\n      </div>\r\n    `;\r\n\r\n    this.el.insertAdjacentHTML("afterend", html);\r\n\r\n    this.dropdown = this.el.nextElementSibling;\r\n\r\n    this._renderSelectedItems();\r\n\r\n    this._renderItems();\r\n  }\r\n\r\n  /*\r\n    Updates the text shown in the dropdown header\r\n  */\r\n  _renderSelectedItems() {\r\n    if (this.multiple) {\r\n      let selectedHtml = "";\r\n\r\n      if (\r\n        window.getComputedStyle(this.dropdown).width === "auto" ||\r\n        this.selectedOptions.length < 2\r\n      ) {\r\n        this.selectedOptions.forEach( (item, index, array) => {\r\n          let text  = item.data.text;\r\n\r\n          if(index !== array.length -1 ){\r\n            text += `, `;\r\n          }\r\n\r\n          selectedHtml += `<span class="current">${text}</span>`;\r\n        });\r\n\r\n        selectedHtml = selectedHtml || this.placeholder;\r\n      } else {\r\n        selectedHtml = `${this.selectedOptions.length} ${this.selectedtext}`;\r\n      }\r\n\r\n      this.dropdown.querySelector(".multiple-options").innerHTML = selectedHtml;\r\n    } else {\r\n      const html =\r\n        this.selectedOptions.length > 0\r\n          ? this.selectedOptions[0].data.text\r\n          : this.placeholder;\r\n\r\n      this.dropdown.querySelector(".current").innerHTML = html;\r\n    }\r\n  }\r\n\r\n  _renderItems() {\r\n    const ul = this.dropdown.querySelector("ul");\r\n\r\n    this.options.forEach((item) => {\r\n\r\n      if(this.multiple && this.config.showSelectedItems){\r\n        this._multipleListAdd(item);\r\n      }\r\n\r\n      ul.appendChild(this._renderItem(item));\r\n    });\r\n  }\r\n\r\n  _renderItem(option) {\r\n    const li      = document.createElement("li");\r\n    li.innerHTML  = option.data.text;\r\n\r\n    if (option.data.extra !== undefined) {\r\n      li.appendChild(this._renderItemExtra(option.data.extra));\r\n    }\r\n\r\n    if (option.attributes.optgroup) {\r\n      addClass(li, "optgroup");\r\n    } else {\r\n      li.setAttribute("data-value", option.data.value);\r\n      const classList = ["option"];\r\n      if (option.attributes.selected) classList.push("selected");\r\n      if (option.attributes.disabled) classList.push("disabled");\r\n      li.classList.add(...classList);\r\n      li.addEventListener("click", (e) => this._onDropdownItemClicked(option, e));\r\n    }\r\n\r\n    option.element = li;\r\n\r\n    return li;\r\n  }\r\n\r\n  _renderItemExtra(content) {\r\n    const span      = document.createElement("span");\r\n    span.innerHTML  = content;\r\n    addClass(span, "extra");\r\n\r\n    return span;\r\n  }\r\n\r\n  update(e=\'\') {\r\n    let $this  = this;\r\n    if(e != \'\'){\r\n      $this  = e.target._niceSelect; \r\n    }\r\n    \r\n    $this.syncDropdown();\r\n  }\r\n\r\n  disable() {\r\n    if (!this.disabled) {\r\n      this.disabled = true;\r\n      addClass(this.dropdown, "disabled");\r\n    }\r\n  }\r\n\r\n  enable() {\r\n    if (this.disabled) {\r\n      this.disabled = false;\r\n      removeClass(this.dropdown, "disabled");\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.resetSelectValue();\r\n    this.selectedOptions = [];\r\n    this._renderSelectedItems();\r\n    this.update();\r\n    triggerChange(this.el);\r\n  }\r\n\r\n  destroy() {\r\n    if(this.selectionList){\r\n      this.removeSelectionList();\r\n    }\r\n\r\n    if (this.dropdown) {\r\n      this.dropdown.remove();\r\n      this.el.classList.remove(\'hidden-select\');\r\n    }\r\n  }\r\n\r\n  focus(target=\'\'){\r\n    const isOpen = hasClass(this.dropdown, "open");\r\n\r\n    if (!isOpen) {\r\n      addClass(this.dropdown, "open");\r\n      triggerModalOpen(this.el);\r\n    } else {\r\n      if (this.multiple) {\r\n        if (target === this.dropdown.querySelector(".multiple-options")) {\r\n          removeClass(this.dropdown, "open");\r\n          triggerModalClose(this.el);\r\n        }\r\n      } else {\r\n        removeClass(this.dropdown, "open");\r\n        triggerModalClose(this.el);\r\n      }\r\n    }\r\n\r\n    if (hasClass(this.dropdown, "open")) {\r\n      const search = this.dropdown.querySelector(".nice-select-search");\r\n\r\n      if (search) {\r\n        search.value = "";\r\n        search.focus();\r\n      }\r\n\r\n      const focused = this.dropdown.querySelector(".focus");\r\n\r\n      if (focused) removeClass(focused, "focus");\r\n\r\n      const selected = this.dropdown.querySelector(".selected");\r\n      if (selected) addClass(selected, "focus");\r\n\r\n      this.dropdown\r\n        .querySelectorAll("ul li")\r\n        .forEach((item) => (item.style.display = ""));\r\n    } else {\r\n      this.dropdown.focus();\r\n    }\r\n  }\r\n\r\n  bindElementEvents(){\r\n    this.el.addEventListener("invalid", () => this._triggerValidationMessage("invalid"));\r\n    window.addEventListener("click", e => this._onClickedOutside(e));\r\n    this.el.addEventListener("change", this.update);\r\n  }\r\n\r\n  bindDropdownEvents() {\r\n    this.dropdown.addEventListener("click", (e) => this._onClicked(e));\r\n    this.dropdown.addEventListener("keydown", (e) => this._onKeyPressed(e));\r\n    this.dropdown.addEventListener("focusin", () => triggerFocusIn(this.el));\r\n    this.dropdown.addEventListener("focusout", () => triggerFocusOut(this.el));\r\n\r\n    if (this.config.searchable) this._bindSearchEvent();\r\n  }\r\n\r\n  _bindSearchEvent() {\r\n    const searchBox = this.dropdown.querySelector(".nice-select-search");\r\n    if (searchBox) {\r\n      searchBox.addEventListener("click", (e) => e.stopPropagation());\r\n      searchBox.addEventListener("input", (e) => this._onSearchChanged(e));\r\n    }\r\n  }\r\n\r\n  _onClicked(e) {\r\n    e.preventDefault();\r\n\r\n    this.focus(e.target);\r\n  }\r\n\r\n  _onDropdownItemClicked(option, e) {\r\n    const optionEl = e.target;\r\n\r\n    if (hasClass(optionEl, "disabled")) {\r\n      return;\r\n    }\r\n\r\n    if (this.multiple) {\r\n      let selected;\r\n\r\n      if (hasClass(optionEl, "selected")) {\r\n        selected  = false;\r\n\r\n        removeClass(optionEl, "selected");\r\n\r\n        // Update Selected Options\r\n        this.selectedOptions = this.selectedOptions.filter(\r\n          (item) => item.data !== option.data\r\n        );\r\n      } else {\r\n        selected  = true;\r\n\r\n        addClass(optionEl, "selected");\r\n\r\n        // Update Selected Options\r\n        this.selectedOptions.push(option);      \r\n      }\r\n\r\n      // Update option \r\n      option.data.selected        = selected;\r\n      option.attributes.selected  = selected;\r\n    } else {      \r\n      // Mark all dropdown options as unselected\r\n      this.dropdown.querySelectorAll(\'li.selected\').forEach((li) => removeClass(li, "selected"));\r\n\r\n      // add the selected class to the current\r\n      addClass(optionEl, "selected");\r\n\r\n      // Update Selected Options Attribute\r\n      this.selectedOptions = [option];\r\n\r\n      // Update option properties \r\n      let prevSelected  = this.options.find(item => item.attributes.selected);\r\n      if(prevSelected){\r\n        prevSelected.data.selected        = false;\r\n        prevSelected.attributes.selected  = false;\r\n      }\r\n\r\n      option.data.selected        = true;\r\n      option.attributes.selected  = true;\r\n    }\r\n\r\n    this._renderSelectedItems();\r\n\r\n    this.syncSelectValue();\r\n\r\n    this.syncSelectionList();\r\n  }\r\n\r\n  /*\r\n    Syncs the original select element with the dropdown\r\n  */\r\n  syncSelectValue() {\r\n    const select    = this.el;\r\n\r\n    if (this.selectedOptions.length > 0) {\r\n      select.value = this.selectedOptions[0].data.value;\r\n    }else{\r\n      // no value selected\r\n      select.value = \'\';\r\n      select.selectedIndex = -1;\r\n    }\r\n\r\n    this.options.forEach(item =>{\r\n      let option   = Array.from(select.options).find(option => option.textContent === item.data.text);\r\n\r\n      if(option == undefined){\r\n        option   = Array.from(select.options).find(option => option.textContent === item.data.value);\r\n      }\r\n\r\n      if(item.attributes.selected){\r\n        option.selected = true;\r\n      } else {\r\n        option.selected = false;\r\n      }\r\n    });\r\n\r\n    // Remove the event listener so we don\'t create a loop\r\n    select.removeEventListener("change", this.update);\r\n\r\n    triggerChange(select);\r\n\r\n    // Add event listener again\r\n    select.addEventListener("change", this.update);\r\n  }\r\n\r\n  resetSelectValue() {\r\n    if (this.multiple) {\r\n      const select = this.el;\r\n      this.selectedOptions.forEach((item) => {\r\n        const el = select.querySelector(`option[value="${item.data.value}"]`);\r\n        if (el) {\r\n          el.selected = false;\r\n        }\r\n      });\r\n    } else if (this.selectedOptions.length > 0) {\r\n      this.el.selectedIndex = -1;\r\n    }\r\n\r\n    triggerChange(this.el);\r\n  }\r\n\r\n  /*\r\n    Syncs the dropdown with the select\r\n  */\r\n  syncDropdown(){\r\n    if (this.dropdown) {\r\n      const open = hasClass(this.dropdown, "open");\r\n\r\n      this.removeSelectionList();\r\n\r\n      this.dropdown.remove();\r\n\r\n      this.data   = null;\r\n\r\n      this.create(false);\r\n\r\n      if (open) {\r\n        triggerClick(this.dropdown);\r\n      }\r\n    }\r\n\r\n    attr(this.el, "disabled") ? this.disable() : this.enable();\r\n  }\r\n\r\n  /*\r\n    Syncs the selected list with the dropdown\r\n  */\r\n  syncSelectionList(){\r\n    if(!this.config.showSelectedItems){\r\n      return;\r\n    }\r\n\r\n    this.removeSelectionList();\r\n\r\n    // Update multiple list\r\n    this.selectedOptions.forEach( item =>{\r\n      this._multipleListAdd(item);\r\n    });\r\n  }\r\n\r\n  _onClickedOutside(e) {\r\n    if (!this.dropdown.contains(e.target)) {\r\n      removeClass(this.dropdown, "open");\r\n      triggerModalClose(this.el);\r\n    }\r\n  }\r\n\r\n  _onKeyPressed(e) {\r\n    const focusedOption = this.dropdown.querySelector(".focus");\r\n    const isOpen        = hasClass(this.dropdown, "open");\r\n\r\n    if (e.keyCode === 13) {\r\n      isOpen ? triggerClick(focusedOption) : triggerClick(this.dropdown);\r\n    } else if (e.keyCode === 40) {\r\n      if (!isOpen) {\r\n        triggerClick(this.dropdown);\r\n      } else {\r\n        const next = this._findNext(focusedOption);\r\n        if (next) {\r\n          if (focusedOption) removeClass(focusedOption, "focus");\r\n          addClass(next, "focus");\r\n        }\r\n      }\r\n      e.preventDefault();\r\n    } else if (e.keyCode === 38) {\r\n      if (!isOpen) {\r\n        triggerClick(this.dropdown);\r\n      } else {\r\n        const prev = this._findPrev(focusedOption);\r\n        if (prev) {\r\n          if (focusedOption) removeClass(focusedOption, "focus");\r\n          addClass(prev, "focus");\r\n        }\r\n      }\r\n      e.preventDefault();\r\n    } else if (e.keyCode === 27 && isOpen) {\r\n      triggerClick(this.dropdown);\r\n    } else if (e.keyCode === 32 && isOpen) {\r\n      return false;\r\n    }\r\n\r\n    const focus = this.dropdown.querySelector(\'.focus\');\r\n    if (focus) {\r\n      focus.scrollIntoView({ block: \'center\' });\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  _findNext(el) {\r\n    let nextEl = el\r\n      ? el.nextElementSibling\r\n      : this.dropdown.querySelector(".list .option");\r\n    while (nextEl) {\r\n      if (!hasClass(nextEl, "disabled") && nextEl.style.display !== "none")\r\n        return nextEl;\r\n      nextEl = nextEl.nextElementSibling;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  _findPrev(el) {\r\n    let prevEl = el\r\n      ? el.previousElementSibling\r\n      : this.dropdown.querySelector(".list .option:last-child");\r\n    while (prevEl) {\r\n      if (!hasClass(prevEl, "disabled") && prevEl.style.display !== "none")\r\n        return prevEl;\r\n      prevEl = prevEl.previousElementSibling;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  _onSearchChanged(e) {\r\n    const text = e.target.value.toLowerCase();\r\n\r\n    if (text === "") {\r\n      this.options.forEach((item) => (item.element.style.display = ""));\r\n    } else if (hasClass(this.dropdown, "open")) {\r\n      const matchReg = new RegExp(text);\r\n      this.options.forEach((item) => {\r\n        item.element.style.display = matchReg.test(item.data.text.toLowerCase())\r\n          ? ""\r\n          : "none";\r\n      });\r\n    }\r\n\r\n    this.dropdown\r\n      .querySelectorAll(".focus")\r\n      .forEach((item) => removeClass(item, "focus"));\r\n\r\n    const firstEl = this._findNext(null);\r\n\r\n    if (firstEl) addClass(firstEl, "focus");\r\n  }\r\n\r\n  _triggerValidationMessage(type) {\r\n    if (type === "invalid") {\r\n      addClass(this.dropdown, "invalid");\r\n      removeClass(this.dropdown, "valid");\r\n    } else {\r\n      addClass(this.dropdown, "valid");\r\n      removeClass(this.dropdown, "invalid");\r\n    }\r\n  }\r\n\r\n  removeSelectionList(){\r\n    if(this.selectionList != null){\r\n      this.selectionList.remove();\r\n      this.selectionList  = null;\r\n    }\r\n  }\r\n\r\n  updateDropdownOption(){\r\n\r\n  }\r\n\r\n  _multipleListAdd(option) {\r\n    if(!this.multiple || option.data.disabled || option.data.value == "" || !option.attributes.selected){\r\n      return;\r\n    }\r\n\r\n    // Create the list\r\n    if(this.selectionList == null){\r\n      this.selectionList\t \t\t= document.createElement(\'ul\');\r\n      this.selectionList.classList.add(\'select-selection-list\');\r\n\r\n      this.el.after(this.selectionList);\r\n    }\r\n    \r\n    // Option is already in the list\r\n    else if(this.selectionList.querySelector(`[data-value="${option.data.value}"]`) != null){\r\n      return;\r\n    }\r\n\r\n    // Create a list element\r\n    let li\t \t\t= document.createElement(\'li\');\r\n    li.classList.add(\'select-selection\');\r\n\r\n    li.dataset.value = option.data.value;\r\n\r\n    let html\t  = `\r\n      <button type="button" class="small remove-select-selection">\r\n        <span class=\'remove-select-selection\'>Ã—</span>\r\n      </button>\r\n    `;\r\n\r\n    // Add\r\n    html   += `<span class=\'selected-name\'>${option.data.text}</span>`\r\n\r\n    li.innerHTML\t= html;\r\n\r\n    this.selectionList.appendChild(li);\r\n\r\n    // Add listener\r\n    li.querySelectorAll(\'.remove-select-selection\').forEach(el=> el.addEventListener("click", this._multipleListRemove.bind(this)));\r\n  }\r\n\r\n  _multipleListRemove(target) {\r\n\r\n    if(this.selectionList == null){\r\n      return;\r\n    }\r\n\r\n    if(target.target != null){\r\n      target  = target.target;\r\n    }\r\n\r\n    // Close button not clicked\r\n    if(target.matches == undefined || !target.matches(\'.remove-select-selection\')){\r\n      return;\r\n    }\r\n\r\n    // Find the dropdown item and click it\r\n    let parent  = target.closest(\'li.select-selection\');\r\n    \r\n    let el  = this.options.find(item => item.data.value === parent.dataset.value).element;\r\n  \r\n    // only click when currently selected\r\n    if(el && el.matches(\'.selected\')){\r\n      el.click();\r\n    }\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NiceSelect);\r\nfunction bind(el, options) {\r\n  return new NiceSelect(el, options);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsZ0JBQWdCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixpQkFBaUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxrQkFBa0I7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsaUJBQWlCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFlLFVBQVUsRUFBQztBQUNuQjtBQUNQO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9OaWNlU2VsZWN0Ly4vc3JjL2pzL25pY2Utc2VsZWN0Mi5qcz9iNGM4Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHRyaWdnZXJFdmVudCAgICAgID0gKGVsLCB0eXBlLCBpbml0ID0ge30pID0+IHtcclxuICBsZXQgRXZlbnRDb25zdHJ1Y3RvcjtcclxuICBpZiAodHlwZSA9PT0gXCJjbGlja1wiKSB7XHJcbiAgICBFdmVudENvbnN0cnVjdG9yID0gTW91c2VFdmVudDtcclxuICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiY2hhbmdlXCIpIHtcclxuICAgIEV2ZW50Q29uc3RydWN0b3IgPSBFdmVudDtcclxuICB9IGVsc2UgaWYgKHR5cGUuaW5jbHVkZXMoXCJmb2N1c1wiKSkge1xyXG4gICAgRXZlbnRDb25zdHJ1Y3RvciA9IEZvY3VzRXZlbnQ7XHJcbiAgfSBlbHNlIHtcclxuICAgIEV2ZW50Q29uc3RydWN0b3IgPSBVSUV2ZW50O1xyXG4gIH1cclxuICBjb25zdCBldmVudCA9IG5ldyBFdmVudENvbnN0cnVjdG9yKHR5cGUsIHtcclxuICAgIGJ1YmJsZXM6IHRydWUsXHJcbiAgICBjYW5jZWxhYmxlOiBmYWxzZSxcclxuICAgIC4uLmluaXQsXHJcbiAgfSk7XHJcbiAgZWwuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbn07XHJcblxyXG5jb25zdCB0cmlnZ2VyQ2xpY2sgICAgICA9IChlbCkgPT4gdHJpZ2dlckV2ZW50KGVsLCBcImNsaWNrXCIpO1xyXG5jb25zdCB0cmlnZ2VyQ2hhbmdlICAgICA9IChlbCkgPT4gdHJpZ2dlckV2ZW50KGVsLCBcImNoYW5nZVwiKTtcclxuY29uc3QgdHJpZ2dlckZvY3VzSW4gICAgPSAoZWwpID0+IHRyaWdnZXJFdmVudChlbCwgXCJmb2N1c2luXCIpO1xyXG5jb25zdCB0cmlnZ2VyRm9jdXNPdXQgICA9IChlbCkgPT4gdHJpZ2dlckV2ZW50KGVsLCBcImZvY3Vzb3V0XCIpO1xyXG5jb25zdCB0cmlnZ2VyTW9kYWxPcGVuICA9IChlbCkgPT4gdHJpZ2dlckV2ZW50KGVsLCBcIm1vZGFsb3BlblwiKTtcclxuY29uc3QgdHJpZ2dlck1vZGFsQ2xvc2UgPSAoZWwpID0+IHRyaWdnZXJFdmVudChlbCwgXCJtb2RhbGNsb3NlXCIpO1xyXG5cclxuY29uc3QgYXR0ciAgICAgICAgICAgICAgPSAoZWwsIGtleSkgPT4gZWxba2V5XSAhPT0gdW5kZWZpbmVkID8gZWxba2V5XSA6IGVsLmdldEF0dHJpYnV0ZShrZXkpO1xyXG5jb25zdCBkYXRhICAgICAgICAgICAgICA9IChlbCwga2V5KSA9PiBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLVwiICsga2V5KTtcclxuY29uc3QgaGFzQ2xhc3MgICAgICAgICAgPSAoZWwsIGNsYXNzTmFtZSkgPT4gZWw/LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpO1xyXG5jb25zdCBhZGRDbGFzcyAgICAgICAgICA9IChlbCwgY2xhc3NOYW1lKSA9PiBlbD8uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG5jb25zdCByZW1vdmVDbGFzcyAgICAgICA9IChlbCwgY2xhc3NOYW1lKSA9PiBlbD8uY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xyXG5cclxuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgZGF0YTogbnVsbCxcclxuICBzZWFyY2hhYmxlOiB0cnVlLFxyXG4gIHNob3dTZWxlY3RlZEl0ZW1zOiB0cnVlLFxyXG4gIHBsYWNlaG9sZGVyOiBcIlNlbGVjdCBhbiBvcHRpb25cIixcclxuICBzZWFyY2h0ZXh0OiBcIlNlYXJjaFwiLFxyXG4gIHNlbGVjdGVkdGV4dDogXCJzZWxlY3RlZFwiLFxyXG4gIGhpZGVTZWxlY3Q6IHRydWVcclxufTtcclxuXHJcbmNsYXNzIE5pY2VTZWxlY3Qge1xyXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgaWYgKCFlbGVtZW50KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZWxlbWVudCBwcm92aWRlZCB0byBOaWNlU2VsZWN0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCEoZWxlbWVudCBpbnN0YW5jZW9mIEVsZW1lbnQpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBlbGVtZW50IHByb3ZpZGVkIHRvIE5pY2VTZWxlY3QgLSBtdXN0IGJlIGEgdmFsaWQgRE9NIGVsZW1lbnQnKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmVsICAgICAgICAgICAgICAgPSBlbGVtZW50O1xyXG4gICAgdGhpcy5lbC5fbmljZVNlbGVjdCAgID0gdGhpcztcclxuICAgIHRoaXMuY29uZmlnICAgICAgICAgICA9IHsgLi4uZGVmYXVsdE9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcclxuICAgIHRoaXMuZGF0YSAgICAgICAgICAgICA9IHRoaXMuY29uZmlnLmRhdGE7XHJcbiAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyAgPSBbXTtcclxuICAgIHRoaXMucGxhY2Vob2xkZXIgICAgICA9IGF0dHIodGhpcy5lbCwgXCJwbGFjZWhvbGRlclwiKSB8fCB0aGlzLmNvbmZpZy5wbGFjZWhvbGRlcjtcclxuICAgIHRoaXMuc2VhcmNodGV4dCAgICAgICA9IGF0dHIodGhpcy5lbCwgXCJzZWFyY2h0ZXh0XCIpIHx8IHRoaXMuY29uZmlnLnNlYXJjaHRleHQ7XHJcbiAgICB0aGlzLnNlbGVjdGVkdGV4dCAgICAgPSBhdHRyKHRoaXMuZWwsIFwic2VsZWN0ZWR0ZXh0XCIpIHx8IHRoaXMuY29uZmlnLnNlbGVjdGVkdGV4dDtcclxuICAgIHRoaXMuZHJvcGRvd24gICAgICAgICA9IG51bGw7XHJcbiAgICB0aGlzLnNlbGVjdGlvbkxpc3QgICAgPSBudWxsO1xyXG4gICAgdGhpcy5tdWx0aXBsZSAgICAgICAgID0gYXR0cih0aGlzLmVsLCBcIm11bHRpcGxlXCIpO1xyXG4gICAgdGhpcy5kaXNhYmxlZCAgICAgICAgID0gYXR0cih0aGlzLmVsLCBcImRpc2FibGVkXCIpO1xyXG4gICAgdGhpcy5jcmVhdGUoKTtcclxuXHJcbiAgICB0aGlzLmJpbmRFbGVtZW50RXZlbnRzKCk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGUoaW5pdGlhbD10cnVlKSB7XHJcbiAgICB0aGlzLmRhdGEgPyB0aGlzLnByb2Nlc3NEYXRhKHRoaXMuZGF0YSkgOiB0aGlzLmV4dHJhY3REYXRhKGluaXRpYWwpO1xyXG4gICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4tc2VsZWN0Jyk7XHJcbiAgICB0aGlzLnJlbmRlckRyb3Bkb3duKCk7XHJcblxyXG4gICAgaWYodGhpcy5jb25maWcuaGlkZVNlbGVjdCl7XHJcbiAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuLXNlbGVjdCcpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5iaW5kRHJvcGRvd25FdmVudHMoKTtcclxuICB9XHJcblxyXG4gIHByb2Nlc3NEYXRhKGRhdGEpIHtcclxuICAgIHRoaXMub3B0aW9ucyA9IGRhdGEubWFwKChpdGVtKSA9PiAoe1xyXG4gICAgICBkYXRhOiBpdGVtLFxyXG4gICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgc2VsZWN0ZWQ6ICEhaXRlbS5zZWxlY3RlZCxcclxuICAgICAgICBkaXNhYmxlZDogISFpdGVtLmRpc2FibGVkLFxyXG4gICAgICAgIG9wdGdyb3VwOiBpdGVtLnZhbHVlID09PSBcIm9wdGdyb3VwXCIsXHJcbiAgICAgIH0sXHJcbiAgICB9KSk7XHJcbiAgfVxyXG5cclxuICBleHRyYWN0RGF0YShpbml0aWFsKSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0gQXJyYXkuZnJvbSh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJvcHRpb24sb3B0Z3JvdXBcIikpO1xyXG4gICAgY29uc3QgYWxsT3B0aW9ucyA9IFtdO1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRPcHRpb25zID0gW107XHJcblxyXG4gICAgdGhpcy5kYXRhID0gb3B0aW9ucy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgbGV0IGl0ZW1EYXRhO1xyXG5cclxuICAgICAgbGV0IHNlbGVjdGVkICA9IGl0ZW0uc2VsZWN0ZWQ7XHJcblxyXG4gICAgICAvLyBGaXJzdCBpdGVtIGlzIG1hcmtlZCBhcyBzZWxlY3RlZCBvbiBkZWZhdWx0IHNlbGVjdHNcclxuICAgICAgaWYoaW5pdGlhbCAmJiBpdGVtLnNlbGVjdGVkICYmICFpdGVtLmRlZmF1bHRTZWxlY3RlZCl7XHJcbiAgICAgICAgc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGl0ZW0udGFnTmFtZSA9PT0gXCJPUFRHUk9VUFwiKSB7XHJcbiAgICAgICAgaXRlbURhdGEgPSB7IHRleHQ6IGl0ZW0ubGFiZWwsIHZhbHVlOiBcIm9wdGdyb3VwXCIgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCB0ZXh0ID0gaXRlbS5kYXRhc2V0LmRpc3BsYXkgPz8gaXRlbS5pbm5lclRleHQ7XHJcbiAgICAgICAgaXRlbURhdGEgPSB7XHJcbiAgICAgICAgICB0ZXh0LFxyXG4gICAgICAgICAgdmFsdWU6IGl0ZW0udmFsdWUsXHJcbiAgICAgICAgICBleHRyYTogaXRlbS5kYXRhc2V0LmV4dHJhLFxyXG4gICAgICAgICAgc2VsZWN0ZWQ6IHNlbGVjdGVkLFxyXG4gICAgICAgICAgZGlzYWJsZWQ6IGl0ZW0uZGlzYWJsZWQsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHtcclxuICAgICAgICBzZWxlY3RlZDogc2VsZWN0ZWQsXHJcbiAgICAgICAgZGlzYWJsZWQ6IGl0ZW0uZGlzYWJsZWQsXHJcbiAgICAgICAgb3B0Z3JvdXA6IGl0ZW0udGFnTmFtZSA9PT0gXCJPUFRHUk9VUFwiLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3Qgb3B0aW9uT2JqID0geyBkYXRhOiBpdGVtRGF0YSwgYXR0cmlidXRlcywgZWxlbWVudDogbnVsbCB9O1xyXG5cclxuICAgICAgYWxsT3B0aW9ucy5wdXNoKG9wdGlvbk9iaik7XHJcblxyXG4gICAgICBpZiAoYXR0cmlidXRlcy5zZWxlY3RlZCkgc2VsZWN0ZWRPcHRpb25zLnB1c2gob3B0aW9uT2JqKTtcclxuXHJcbiAgICAgIHJldHVybiBpdGVtRGF0YTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucyAgICAgICAgICA9IGFsbE9wdGlvbnM7XHJcbiAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyAgPSBzZWxlY3RlZE9wdGlvbnM7XHJcbiAgfVxyXG5cclxuICByZW5kZXJEcm9wZG93bigpIHtcclxuICAgIGNvbnN0IGNsYXNzZXMgPSBbXHJcbiAgICAgIFwibmljZS1zZWxlY3RcIixcclxuICAgICAgYXR0cih0aGlzLmVsLCBcImNsYXNzXCIpIHx8IFwiXCIsXHJcbiAgICAgIHRoaXMuZGlzYWJsZWQgPyBcImRpc2FibGVkXCIgOiBcIlwiLFxyXG4gICAgICB0aGlzLm11bHRpcGxlID8gXCJoYXMtbXVsdGlwbGVcIiA6IFwiXCIsXHJcbiAgICBdLmZpbHRlcihCb29sZWFuKTtcclxuXHJcbiAgICBjb25zdCBzZWFyY2hIdG1sID0gdGhpcy5jb25maWcuc2VhcmNoYWJsZVxyXG4gICAgICA/IGBcclxuICAgICAgPGRpdiBjbGFzcz1cIm5pY2Utc2VsZWN0LXNlYXJjaC1ib3hcIj5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cIm5pY2Utc2VsZWN0LXNlYXJjaFwiIHBsYWNlaG9sZGVyPVwiJHt0aGlzLnNlYXJjaHRleHR9Li4uXCIgdGl0bGU9XCJzZWFyY2hcIi8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYFxyXG4gICAgICA6IFwiXCI7XHJcblxyXG4gICAgY29uc3QgaHRtbCA9IGBcclxuICAgICAgPGRpdiBjbGFzcz1cIiR7Y2xhc3Nlcy5qb2luKFwiIFwiKX1cIiB0YWJpbmRleD1cIiR7dGhpcy5kaXNhYmxlZCA/IFwiXCIgOiAwfVwiPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiJHt0aGlzLm11bHRpcGxlID8gXCJtdWx0aXBsZS1vcHRpb25zXCIgOiBcImN1cnJlbnRcIn1cIj48L3NwYW4+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cIm5pY2Utc2VsZWN0LWRyb3Bkb3duXCI+XHJcbiAgICAgICAgICAke3NlYXJjaEh0bWx9XHJcbiAgICAgICAgICA8dWwgY2xhc3M9XCJsaXN0XCI+PC91bD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIHRoaXMuZWwuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYWZ0ZXJlbmRcIiwgaHRtbCk7XHJcblxyXG4gICAgdGhpcy5kcm9wZG93biA9IHRoaXMuZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cclxuICAgIHRoaXMuX3JlbmRlclNlbGVjdGVkSXRlbXMoKTtcclxuXHJcbiAgICB0aGlzLl9yZW5kZXJJdGVtcygpO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICAgIFVwZGF0ZXMgdGhlIHRleHQgc2hvd24gaW4gdGhlIGRyb3Bkb3duIGhlYWRlclxyXG4gICovXHJcbiAgX3JlbmRlclNlbGVjdGVkSXRlbXMoKSB7XHJcbiAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICBsZXQgc2VsZWN0ZWRIdG1sID0gXCJcIjtcclxuXHJcbiAgICAgIGlmIChcclxuICAgICAgICB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmRyb3Bkb3duKS53aWR0aCA9PT0gXCJhdXRvXCIgfHxcclxuICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucy5sZW5ndGggPCAyXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zLmZvckVhY2goIChpdGVtLCBpbmRleCwgYXJyYXkpID0+IHtcclxuICAgICAgICAgIGxldCB0ZXh0ICA9IGl0ZW0uZGF0YS50ZXh0O1xyXG5cclxuICAgICAgICAgIGlmKGluZGV4ICE9PSBhcnJheS5sZW5ndGggLTEgKXtcclxuICAgICAgICAgICAgdGV4dCArPSBgLCBgO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHNlbGVjdGVkSHRtbCArPSBgPHNwYW4gY2xhc3M9XCJjdXJyZW50XCI+JHt0ZXh0fTwvc3Bhbj5gO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzZWxlY3RlZEh0bWwgPSBzZWxlY3RlZEh0bWwgfHwgdGhpcy5wbGFjZWhvbGRlcjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZWxlY3RlZEh0bWwgPSBgJHt0aGlzLnNlbGVjdGVkT3B0aW9ucy5sZW5ndGh9ICR7dGhpcy5zZWxlY3RlZHRleHR9YDtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5kcm9wZG93bi5xdWVyeVNlbGVjdG9yKFwiLm11bHRpcGxlLW9wdGlvbnNcIikuaW5uZXJIVE1MID0gc2VsZWN0ZWRIdG1sO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgaHRtbCA9XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMubGVuZ3RoID4gMFxyXG4gICAgICAgICAgPyB0aGlzLnNlbGVjdGVkT3B0aW9uc1swXS5kYXRhLnRleHRcclxuICAgICAgICAgIDogdGhpcy5wbGFjZWhvbGRlcjtcclxuXHJcbiAgICAgIHRoaXMuZHJvcGRvd24ucXVlcnlTZWxlY3RvcihcIi5jdXJyZW50XCIpLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfcmVuZGVySXRlbXMoKSB7XHJcbiAgICBjb25zdCB1bCA9IHRoaXMuZHJvcGRvd24ucXVlcnlTZWxlY3RvcihcInVsXCIpO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcblxyXG4gICAgICBpZih0aGlzLm11bHRpcGxlICYmIHRoaXMuY29uZmlnLnNob3dTZWxlY3RlZEl0ZW1zKXtcclxuICAgICAgICB0aGlzLl9tdWx0aXBsZUxpc3RBZGQoaXRlbSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHVsLmFwcGVuZENoaWxkKHRoaXMuX3JlbmRlckl0ZW0oaXRlbSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfcmVuZGVySXRlbShvcHRpb24pIHtcclxuICAgIGNvbnN0IGxpICAgICAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICBsaS5pbm5lckhUTUwgID0gb3B0aW9uLmRhdGEudGV4dDtcclxuXHJcbiAgICBpZiAob3B0aW9uLmRhdGEuZXh0cmEgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBsaS5hcHBlbmRDaGlsZCh0aGlzLl9yZW5kZXJJdGVtRXh0cmEob3B0aW9uLmRhdGEuZXh0cmEpKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAob3B0aW9uLmF0dHJpYnV0ZXMub3B0Z3JvdXApIHtcclxuICAgICAgYWRkQ2xhc3MobGksIFwib3B0Z3JvdXBcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsaS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXZhbHVlXCIsIG9wdGlvbi5kYXRhLnZhbHVlKTtcclxuICAgICAgY29uc3QgY2xhc3NMaXN0ID0gW1wib3B0aW9uXCJdO1xyXG4gICAgICBpZiAob3B0aW9uLmF0dHJpYnV0ZXMuc2VsZWN0ZWQpIGNsYXNzTGlzdC5wdXNoKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgIGlmIChvcHRpb24uYXR0cmlidXRlcy5kaXNhYmxlZCkgY2xhc3NMaXN0LnB1c2goXCJkaXNhYmxlZFwiKTtcclxuICAgICAgbGkuY2xhc3NMaXN0LmFkZCguLi5jbGFzc0xpc3QpO1xyXG4gICAgICBsaS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHRoaXMuX29uRHJvcGRvd25JdGVtQ2xpY2tlZChvcHRpb24sIGUpKTtcclxuICAgIH1cclxuXHJcbiAgICBvcHRpb24uZWxlbWVudCA9IGxpO1xyXG5cclxuICAgIHJldHVybiBsaTtcclxuICB9XHJcblxyXG4gIF9yZW5kZXJJdGVtRXh0cmEoY29udGVudCkge1xyXG4gICAgY29uc3Qgc3BhbiAgICAgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICBzcGFuLmlubmVySFRNTCAgPSBjb250ZW50O1xyXG4gICAgYWRkQ2xhc3Moc3BhbiwgXCJleHRyYVwiKTtcclxuXHJcbiAgICByZXR1cm4gc3BhbjtcclxuICB9XHJcblxyXG4gIHVwZGF0ZShlPScnKSB7XHJcbiAgICBsZXQgJHRoaXMgID0gdGhpcztcclxuICAgIGlmKGUgIT0gJycpe1xyXG4gICAgICAkdGhpcyAgPSBlLnRhcmdldC5fbmljZVNlbGVjdDsgXHJcbiAgICB9XHJcbiAgICBcclxuICAgICR0aGlzLnN5bmNEcm9wZG93bigpO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZSgpIHtcclxuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgYWRkQ2xhc3ModGhpcy5kcm9wZG93biwgXCJkaXNhYmxlZFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVuYWJsZSgpIHtcclxuICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5kcm9wZG93biwgXCJkaXNhYmxlZFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsZWFyKCkge1xyXG4gICAgdGhpcy5yZXNldFNlbGVjdFZhbHVlKCk7XHJcbiAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5fcmVuZGVyU2VsZWN0ZWRJdGVtcygpO1xyXG4gICAgdGhpcy51cGRhdGUoKTtcclxuICAgIHRyaWdnZXJDaGFuZ2UodGhpcy5lbCk7XHJcbiAgfVxyXG5cclxuICBkZXN0cm95KCkge1xyXG4gICAgaWYodGhpcy5zZWxlY3Rpb25MaXN0KXtcclxuICAgICAgdGhpcy5yZW1vdmVTZWxlY3Rpb25MaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuZHJvcGRvd24pIHtcclxuICAgICAgdGhpcy5kcm9wZG93bi5yZW1vdmUoKTtcclxuICAgICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4tc2VsZWN0Jyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmb2N1cyh0YXJnZXQ9Jycpe1xyXG4gICAgY29uc3QgaXNPcGVuID0gaGFzQ2xhc3ModGhpcy5kcm9wZG93biwgXCJvcGVuXCIpO1xyXG5cclxuICAgIGlmICghaXNPcGVuKSB7XHJcbiAgICAgIGFkZENsYXNzKHRoaXMuZHJvcGRvd24sIFwib3BlblwiKTtcclxuICAgICAgdHJpZ2dlck1vZGFsT3Blbih0aGlzLmVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gdGhpcy5kcm9wZG93bi5xdWVyeVNlbGVjdG9yKFwiLm11bHRpcGxlLW9wdGlvbnNcIikpIHtcclxuICAgICAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZHJvcGRvd24sIFwib3BlblwiKTtcclxuICAgICAgICAgIHRyaWdnZXJNb2RhbENsb3NlKHRoaXMuZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZW1vdmVDbGFzcyh0aGlzLmRyb3Bkb3duLCBcIm9wZW5cIik7XHJcbiAgICAgICAgdHJpZ2dlck1vZGFsQ2xvc2UodGhpcy5lbCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoaGFzQ2xhc3ModGhpcy5kcm9wZG93biwgXCJvcGVuXCIpKSB7XHJcbiAgICAgIGNvbnN0IHNlYXJjaCA9IHRoaXMuZHJvcGRvd24ucXVlcnlTZWxlY3RvcihcIi5uaWNlLXNlbGVjdC1zZWFyY2hcIik7XHJcblxyXG4gICAgICBpZiAoc2VhcmNoKSB7XHJcbiAgICAgICAgc2VhcmNoLnZhbHVlID0gXCJcIjtcclxuICAgICAgICBzZWFyY2guZm9jdXMoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZm9jdXNlZCA9IHRoaXMuZHJvcGRvd24ucXVlcnlTZWxlY3RvcihcIi5mb2N1c1wiKTtcclxuXHJcbiAgICAgIGlmIChmb2N1c2VkKSByZW1vdmVDbGFzcyhmb2N1c2VkLCBcImZvY3VzXCIpO1xyXG5cclxuICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLmRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3IoXCIuc2VsZWN0ZWRcIik7XHJcbiAgICAgIGlmIChzZWxlY3RlZCkgYWRkQ2xhc3Moc2VsZWN0ZWQsIFwiZm9jdXNcIik7XHJcblxyXG4gICAgICB0aGlzLmRyb3Bkb3duXHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoXCJ1bCBsaVwiKVxyXG4gICAgICAgIC5mb3JFYWNoKChpdGVtKSA9PiAoaXRlbS5zdHlsZS5kaXNwbGF5ID0gXCJcIikpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5kcm9wZG93bi5mb2N1cygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYmluZEVsZW1lbnRFdmVudHMoKXtcclxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImludmFsaWRcIiwgKCkgPT4gdGhpcy5fdHJpZ2dlclZhbGlkYXRpb25NZXNzYWdlKFwiaW52YWxpZFwiKSk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4gdGhpcy5fb25DbGlja2VkT3V0c2lkZShlKSk7XHJcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcy51cGRhdGUpO1xyXG4gIH1cclxuXHJcbiAgYmluZERyb3Bkb3duRXZlbnRzKCkge1xyXG4gICAgdGhpcy5kcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHRoaXMuX29uQ2xpY2tlZChlKSk7XHJcbiAgICB0aGlzLmRyb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB0aGlzLl9vbktleVByZXNzZWQoZSkpO1xyXG4gICAgdGhpcy5kcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCAoKSA9PiB0cmlnZ2VyRm9jdXNJbih0aGlzLmVsKSk7XHJcbiAgICB0aGlzLmRyb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCAoKSA9PiB0cmlnZ2VyRm9jdXNPdXQodGhpcy5lbCkpO1xyXG5cclxuICAgIGlmICh0aGlzLmNvbmZpZy5zZWFyY2hhYmxlKSB0aGlzLl9iaW5kU2VhcmNoRXZlbnQoKTtcclxuICB9XHJcblxyXG4gIF9iaW5kU2VhcmNoRXZlbnQoKSB7XHJcbiAgICBjb25zdCBzZWFyY2hCb3ggPSB0aGlzLmRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3IoXCIubmljZS1zZWxlY3Qtc2VhcmNoXCIpO1xyXG4gICAgaWYgKHNlYXJjaEJveCkge1xyXG4gICAgICBzZWFyY2hCb3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcclxuICAgICAgc2VhcmNoQm94LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4gdGhpcy5fb25TZWFyY2hDaGFuZ2VkKGUpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9vbkNsaWNrZWQoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIHRoaXMuZm9jdXMoZS50YXJnZXQpO1xyXG4gIH1cclxuXHJcbiAgX29uRHJvcGRvd25JdGVtQ2xpY2tlZChvcHRpb24sIGUpIHtcclxuICAgIGNvbnN0IG9wdGlvbkVsID0gZS50YXJnZXQ7XHJcblxyXG4gICAgaWYgKGhhc0NsYXNzKG9wdGlvbkVsLCBcImRpc2FibGVkXCIpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICBsZXQgc2VsZWN0ZWQ7XHJcblxyXG4gICAgICBpZiAoaGFzQ2xhc3Mob3B0aW9uRWwsIFwic2VsZWN0ZWRcIikpIHtcclxuICAgICAgICBzZWxlY3RlZCAgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcmVtb3ZlQ2xhc3Mob3B0aW9uRWwsIFwic2VsZWN0ZWRcIik7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBTZWxlY3RlZCBPcHRpb25zXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMgPSB0aGlzLnNlbGVjdGVkT3B0aW9ucy5maWx0ZXIoXHJcbiAgICAgICAgICAoaXRlbSkgPT4gaXRlbS5kYXRhICE9PSBvcHRpb24uZGF0YVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2VsZWN0ZWQgID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgYWRkQ2xhc3Mob3B0aW9uRWwsIFwic2VsZWN0ZWRcIik7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBTZWxlY3RlZCBPcHRpb25zXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMucHVzaChvcHRpb24pOyAgICAgIFxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBVcGRhdGUgb3B0aW9uIFxyXG4gICAgICBvcHRpb24uZGF0YS5zZWxlY3RlZCAgICAgICAgPSBzZWxlY3RlZDtcclxuICAgICAgb3B0aW9uLmF0dHJpYnV0ZXMuc2VsZWN0ZWQgID0gc2VsZWN0ZWQ7XHJcbiAgICB9IGVsc2UgeyAgICAgIFxyXG4gICAgICAvLyBNYXJrIGFsbCBkcm9wZG93biBvcHRpb25zIGFzIHVuc2VsZWN0ZWRcclxuICAgICAgdGhpcy5kcm9wZG93bi5xdWVyeVNlbGVjdG9yQWxsKCdsaS5zZWxlY3RlZCcpLmZvckVhY2goKGxpKSA9PiByZW1vdmVDbGFzcyhsaSwgXCJzZWxlY3RlZFwiKSk7XHJcblxyXG4gICAgICAvLyBhZGQgdGhlIHNlbGVjdGVkIGNsYXNzIHRvIHRoZSBjdXJyZW50XHJcbiAgICAgIGFkZENsYXNzKG9wdGlvbkVsLCBcInNlbGVjdGVkXCIpO1xyXG5cclxuICAgICAgLy8gVXBkYXRlIFNlbGVjdGVkIE9wdGlvbnMgQXR0cmlidXRlXHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zID0gW29wdGlvbl07XHJcblxyXG4gICAgICAvLyBVcGRhdGUgb3B0aW9uIHByb3BlcnRpZXMgXHJcbiAgICAgIGxldCBwcmV2U2VsZWN0ZWQgID0gdGhpcy5vcHRpb25zLmZpbmQoaXRlbSA9PiBpdGVtLmF0dHJpYnV0ZXMuc2VsZWN0ZWQpO1xyXG4gICAgICBpZihwcmV2U2VsZWN0ZWQpe1xyXG4gICAgICAgIHByZXZTZWxlY3RlZC5kYXRhLnNlbGVjdGVkICAgICAgICA9IGZhbHNlO1xyXG4gICAgICAgIHByZXZTZWxlY3RlZC5hdHRyaWJ1dGVzLnNlbGVjdGVkICA9IGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBvcHRpb24uZGF0YS5zZWxlY3RlZCAgICAgICAgPSB0cnVlO1xyXG4gICAgICBvcHRpb24uYXR0cmlidXRlcy5zZWxlY3RlZCAgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3JlbmRlclNlbGVjdGVkSXRlbXMoKTtcclxuXHJcbiAgICB0aGlzLnN5bmNTZWxlY3RWYWx1ZSgpO1xyXG5cclxuICAgIHRoaXMuc3luY1NlbGVjdGlvbkxpc3QoKTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICBTeW5jcyB0aGUgb3JpZ2luYWwgc2VsZWN0IGVsZW1lbnQgd2l0aCB0aGUgZHJvcGRvd25cclxuICAqL1xyXG4gIHN5bmNTZWxlY3RWYWx1ZSgpIHtcclxuICAgIGNvbnN0IHNlbGVjdCAgICA9IHRoaXMuZWw7XHJcblxyXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRPcHRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgc2VsZWN0LnZhbHVlID0gdGhpcy5zZWxlY3RlZE9wdGlvbnNbMF0uZGF0YS52YWx1ZTtcclxuICAgIH1lbHNle1xyXG4gICAgICAvLyBubyB2YWx1ZSBzZWxlY3RlZFxyXG4gICAgICBzZWxlY3QudmFsdWUgPSAnJztcclxuICAgICAgc2VsZWN0LnNlbGVjdGVkSW5kZXggPSAtMTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaChpdGVtID0+e1xyXG4gICAgICBsZXQgb3B0aW9uICAgPSBBcnJheS5mcm9tKHNlbGVjdC5vcHRpb25zKS5maW5kKG9wdGlvbiA9PiBvcHRpb24udGV4dENvbnRlbnQgPT09IGl0ZW0uZGF0YS50ZXh0KTtcclxuXHJcbiAgICAgIGlmKG9wdGlvbiA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgIG9wdGlvbiAgID0gQXJyYXkuZnJvbShzZWxlY3Qub3B0aW9ucykuZmluZChvcHRpb24gPT4gb3B0aW9uLnRleHRDb250ZW50ID09PSBpdGVtLmRhdGEudmFsdWUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZihpdGVtLmF0dHJpYnV0ZXMuc2VsZWN0ZWQpe1xyXG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFJlbW92ZSB0aGUgZXZlbnQgbGlzdGVuZXIgc28gd2UgZG9uJ3QgY3JlYXRlIGEgbG9vcFxyXG4gICAgc2VsZWN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcy51cGRhdGUpO1xyXG5cclxuICAgIHRyaWdnZXJDaGFuZ2Uoc2VsZWN0KTtcclxuXHJcbiAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXIgYWdhaW5cclxuICAgIHNlbGVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHRoaXMudXBkYXRlKTtcclxuICB9XHJcblxyXG4gIHJlc2V0U2VsZWN0VmFsdWUoKSB7XHJcbiAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICBjb25zdCBzZWxlY3QgPSB0aGlzLmVsO1xyXG4gICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBzZWxlY3QucXVlcnlTZWxlY3Rvcihgb3B0aW9uW3ZhbHVlPVwiJHtpdGVtLmRhdGEudmFsdWV9XCJdYCk7XHJcbiAgICAgICAgaWYgKGVsKSB7XHJcbiAgICAgICAgICBlbC5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRPcHRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5lbC5zZWxlY3RlZEluZGV4ID0gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgdHJpZ2dlckNoYW5nZSh0aGlzLmVsKTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICBTeW5jcyB0aGUgZHJvcGRvd24gd2l0aCB0aGUgc2VsZWN0XHJcbiAgKi9cclxuICBzeW5jRHJvcGRvd24oKXtcclxuICAgIGlmICh0aGlzLmRyb3Bkb3duKSB7XHJcbiAgICAgIGNvbnN0IG9wZW4gPSBoYXNDbGFzcyh0aGlzLmRyb3Bkb3duLCBcIm9wZW5cIik7XHJcblxyXG4gICAgICB0aGlzLnJlbW92ZVNlbGVjdGlvbkxpc3QoKTtcclxuXHJcbiAgICAgIHRoaXMuZHJvcGRvd24ucmVtb3ZlKCk7XHJcblxyXG4gICAgICB0aGlzLmRhdGEgICA9IG51bGw7XHJcblxyXG4gICAgICB0aGlzLmNyZWF0ZShmYWxzZSk7XHJcblxyXG4gICAgICBpZiAob3Blbikge1xyXG4gICAgICAgIHRyaWdnZXJDbGljayh0aGlzLmRyb3Bkb3duKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGF0dHIodGhpcy5lbCwgXCJkaXNhYmxlZFwiKSA/IHRoaXMuZGlzYWJsZSgpIDogdGhpcy5lbmFibGUoKTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICBTeW5jcyB0aGUgc2VsZWN0ZWQgbGlzdCB3aXRoIHRoZSBkcm9wZG93blxyXG4gICovXHJcbiAgc3luY1NlbGVjdGlvbkxpc3QoKXtcclxuICAgIGlmKCF0aGlzLmNvbmZpZy5zaG93U2VsZWN0ZWRJdGVtcyl7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlbW92ZVNlbGVjdGlvbkxpc3QoKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgbXVsdGlwbGUgbGlzdFxyXG4gICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMuZm9yRWFjaCggaXRlbSA9PntcclxuICAgICAgdGhpcy5fbXVsdGlwbGVMaXN0QWRkKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfb25DbGlja2VkT3V0c2lkZShlKSB7XHJcbiAgICBpZiAoIXRoaXMuZHJvcGRvd24uY29udGFpbnMoZS50YXJnZXQpKSB7XHJcbiAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZHJvcGRvd24sIFwib3BlblwiKTtcclxuICAgICAgdHJpZ2dlck1vZGFsQ2xvc2UodGhpcy5lbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfb25LZXlQcmVzc2VkKGUpIHtcclxuICAgIGNvbnN0IGZvY3VzZWRPcHRpb24gPSB0aGlzLmRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3IoXCIuZm9jdXNcIik7XHJcbiAgICBjb25zdCBpc09wZW4gICAgICAgID0gaGFzQ2xhc3ModGhpcy5kcm9wZG93biwgXCJvcGVuXCIpO1xyXG5cclxuICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgIGlzT3BlbiA/IHRyaWdnZXJDbGljayhmb2N1c2VkT3B0aW9uKSA6IHRyaWdnZXJDbGljayh0aGlzLmRyb3Bkb3duKTtcclxuICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSA0MCkge1xyXG4gICAgICBpZiAoIWlzT3Blbikge1xyXG4gICAgICAgIHRyaWdnZXJDbGljayh0aGlzLmRyb3Bkb3duKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5fZmluZE5leHQoZm9jdXNlZE9wdGlvbik7XHJcbiAgICAgICAgaWYgKG5leHQpIHtcclxuICAgICAgICAgIGlmIChmb2N1c2VkT3B0aW9uKSByZW1vdmVDbGFzcyhmb2N1c2VkT3B0aW9uLCBcImZvY3VzXCIpO1xyXG4gICAgICAgICAgYWRkQ2xhc3MobmV4dCwgXCJmb2N1c1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM4KSB7XHJcbiAgICAgIGlmICghaXNPcGVuKSB7XHJcbiAgICAgICAgdHJpZ2dlckNsaWNrKHRoaXMuZHJvcGRvd24pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHByZXYgPSB0aGlzLl9maW5kUHJldihmb2N1c2VkT3B0aW9uKTtcclxuICAgICAgICBpZiAocHJldikge1xyXG4gICAgICAgICAgaWYgKGZvY3VzZWRPcHRpb24pIHJlbW92ZUNsYXNzKGZvY3VzZWRPcHRpb24sIFwiZm9jdXNcIik7XHJcbiAgICAgICAgICBhZGRDbGFzcyhwcmV2LCBcImZvY3VzXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMjcgJiYgaXNPcGVuKSB7XHJcbiAgICAgIHRyaWdnZXJDbGljayh0aGlzLmRyb3Bkb3duKTtcclxuICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzMiAmJiBpc09wZW4pIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZvY3VzID0gdGhpcy5kcm9wZG93bi5xdWVyeVNlbGVjdG9yKCcuZm9jdXMnKTtcclxuICAgIGlmIChmb2N1cykge1xyXG4gICAgICBmb2N1cy5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiAnY2VudGVyJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfZmluZE5leHQoZWwpIHtcclxuICAgIGxldCBuZXh0RWwgPSBlbFxyXG4gICAgICA/IGVsLm5leHRFbGVtZW50U2libGluZ1xyXG4gICAgICA6IHRoaXMuZHJvcGRvd24ucXVlcnlTZWxlY3RvcihcIi5saXN0IC5vcHRpb25cIik7XHJcbiAgICB3aGlsZSAobmV4dEVsKSB7XHJcbiAgICAgIGlmICghaGFzQ2xhc3MobmV4dEVsLCBcImRpc2FibGVkXCIpICYmIG5leHRFbC5zdHlsZS5kaXNwbGF5ICE9PSBcIm5vbmVcIilcclxuICAgICAgICByZXR1cm4gbmV4dEVsO1xyXG4gICAgICBuZXh0RWwgPSBuZXh0RWwubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgX2ZpbmRQcmV2KGVsKSB7XHJcbiAgICBsZXQgcHJldkVsID0gZWxcclxuICAgICAgPyBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nXHJcbiAgICAgIDogdGhpcy5kcm9wZG93bi5xdWVyeVNlbGVjdG9yKFwiLmxpc3QgLm9wdGlvbjpsYXN0LWNoaWxkXCIpO1xyXG4gICAgd2hpbGUgKHByZXZFbCkge1xyXG4gICAgICBpZiAoIWhhc0NsYXNzKHByZXZFbCwgXCJkaXNhYmxlZFwiKSAmJiBwcmV2RWwuc3R5bGUuZGlzcGxheSAhPT0gXCJub25lXCIpXHJcbiAgICAgICAgcmV0dXJuIHByZXZFbDtcclxuICAgICAgcHJldkVsID0gcHJldkVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBfb25TZWFyY2hDaGFuZ2VkKGUpIHtcclxuICAgIGNvbnN0IHRleHQgPSBlLnRhcmdldC52YWx1ZS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgIGlmICh0ZXh0ID09PSBcIlwiKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChpdGVtKSA9PiAoaXRlbS5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIlwiKSk7XHJcbiAgICB9IGVsc2UgaWYgKGhhc0NsYXNzKHRoaXMuZHJvcGRvd24sIFwib3BlblwiKSkge1xyXG4gICAgICBjb25zdCBtYXRjaFJlZyA9IG5ldyBSZWdFeHAodGV4dCk7XHJcbiAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgaXRlbS5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBtYXRjaFJlZy50ZXN0KGl0ZW0uZGF0YS50ZXh0LnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgICA/IFwiXCJcclxuICAgICAgICAgIDogXCJub25lXCI7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZHJvcGRvd25cclxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9jdXNcIilcclxuICAgICAgLmZvckVhY2goKGl0ZW0pID0+IHJlbW92ZUNsYXNzKGl0ZW0sIFwiZm9jdXNcIikpO1xyXG5cclxuICAgIGNvbnN0IGZpcnN0RWwgPSB0aGlzLl9maW5kTmV4dChudWxsKTtcclxuXHJcbiAgICBpZiAoZmlyc3RFbCkgYWRkQ2xhc3MoZmlyc3RFbCwgXCJmb2N1c1wiKTtcclxuICB9XHJcblxyXG4gIF90cmlnZ2VyVmFsaWRhdGlvbk1lc3NhZ2UodHlwZSkge1xyXG4gICAgaWYgKHR5cGUgPT09IFwiaW52YWxpZFwiKSB7XHJcbiAgICAgIGFkZENsYXNzKHRoaXMuZHJvcGRvd24sIFwiaW52YWxpZFwiKTtcclxuICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5kcm9wZG93biwgXCJ2YWxpZFwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFkZENsYXNzKHRoaXMuZHJvcGRvd24sIFwidmFsaWRcIik7XHJcbiAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZHJvcGRvd24sIFwiaW52YWxpZFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZVNlbGVjdGlvbkxpc3QoKXtcclxuICAgIGlmKHRoaXMuc2VsZWN0aW9uTGlzdCAhPSBudWxsKXtcclxuICAgICAgdGhpcy5zZWxlY3Rpb25MaXN0LnJlbW92ZSgpO1xyXG4gICAgICB0aGlzLnNlbGVjdGlvbkxpc3QgID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZURyb3Bkb3duT3B0aW9uKCl7XHJcblxyXG4gIH1cclxuXHJcbiAgX211bHRpcGxlTGlzdEFkZChvcHRpb24pIHtcclxuICAgIGlmKCF0aGlzLm11bHRpcGxlIHx8IG9wdGlvbi5kYXRhLmRpc2FibGVkIHx8IG9wdGlvbi5kYXRhLnZhbHVlID09IFwiXCIgfHwgIW9wdGlvbi5hdHRyaWJ1dGVzLnNlbGVjdGVkKXtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgbGlzdFxyXG4gICAgaWYodGhpcy5zZWxlY3Rpb25MaXN0ID09IG51bGwpe1xyXG4gICAgICB0aGlzLnNlbGVjdGlvbkxpc3RcdCBcdFx0PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xyXG4gICAgICB0aGlzLnNlbGVjdGlvbkxpc3QuY2xhc3NMaXN0LmFkZCgnc2VsZWN0LXNlbGVjdGlvbi1saXN0Jyk7XHJcblxyXG4gICAgICB0aGlzLmVsLmFmdGVyKHRoaXMuc2VsZWN0aW9uTGlzdCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIE9wdGlvbiBpcyBhbHJlYWR5IGluIHRoZSBsaXN0XHJcbiAgICBlbHNlIGlmKHRoaXMuc2VsZWN0aW9uTGlzdC5xdWVyeVNlbGVjdG9yKGBbZGF0YS12YWx1ZT1cIiR7b3B0aW9uLmRhdGEudmFsdWV9XCJdYCkgIT0gbnVsbCl7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgYSBsaXN0IGVsZW1lbnRcclxuICAgIGxldCBsaVx0IFx0XHQ9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICBsaS5jbGFzc0xpc3QuYWRkKCdzZWxlY3Qtc2VsZWN0aW9uJyk7XHJcblxyXG4gICAgbGkuZGF0YXNldC52YWx1ZSA9IG9wdGlvbi5kYXRhLnZhbHVlO1xyXG5cclxuICAgIGxldCBodG1sXHQgID0gYFxyXG4gICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInNtYWxsIHJlbW92ZS1zZWxlY3Qtc2VsZWN0aW9uXCI+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9J3JlbW92ZS1zZWxlY3Qtc2VsZWN0aW9uJz7Dlzwvc3Bhbj5cclxuICAgICAgPC9idXR0b24+XHJcbiAgICBgO1xyXG5cclxuICAgIC8vIEFkZFxyXG4gICAgaHRtbCAgICs9IGA8c3BhbiBjbGFzcz0nc2VsZWN0ZWQtbmFtZSc+JHtvcHRpb24uZGF0YS50ZXh0fTwvc3Bhbj5gXHJcblxyXG4gICAgbGkuaW5uZXJIVE1MXHQ9IGh0bWw7XHJcblxyXG4gICAgdGhpcy5zZWxlY3Rpb25MaXN0LmFwcGVuZENoaWxkKGxpKTtcclxuXHJcbiAgICAvLyBBZGQgbGlzdGVuZXJcclxuICAgIGxpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZW1vdmUtc2VsZWN0LXNlbGVjdGlvbicpLmZvckVhY2goZWw9PiBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fbXVsdGlwbGVMaXN0UmVtb3ZlLmJpbmQodGhpcykpKTtcclxuICB9XHJcblxyXG4gIF9tdWx0aXBsZUxpc3RSZW1vdmUodGFyZ2V0KSB7XHJcblxyXG4gICAgaWYodGhpcy5zZWxlY3Rpb25MaXN0ID09IG51bGwpe1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGFyZ2V0LnRhcmdldCAhPSBudWxsKXtcclxuICAgICAgdGFyZ2V0ICA9IHRhcmdldC50YXJnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2xvc2UgYnV0dG9uIG5vdCBjbGlja2VkXHJcbiAgICBpZih0YXJnZXQubWF0Y2hlcyA9PSB1bmRlZmluZWQgfHwgIXRhcmdldC5tYXRjaGVzKCcucmVtb3ZlLXNlbGVjdC1zZWxlY3Rpb24nKSl7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGaW5kIHRoZSBkcm9wZG93biBpdGVtIGFuZCBjbGljayBpdFxyXG4gICAgbGV0IHBhcmVudCAgPSB0YXJnZXQuY2xvc2VzdCgnbGkuc2VsZWN0LXNlbGVjdGlvbicpO1xyXG4gICAgXHJcbiAgICBsZXQgZWwgID0gdGhpcy5vcHRpb25zLmZpbmQoaXRlbSA9PiBpdGVtLmRhdGEudmFsdWUgPT09IHBhcmVudC5kYXRhc2V0LnZhbHVlKS5lbGVtZW50O1xyXG4gIFxyXG4gICAgLy8gb25seSBjbGljayB3aGVuIGN1cnJlbnRseSBzZWxlY3RlZFxyXG4gICAgaWYoZWwgJiYgZWwubWF0Y2hlcygnLnNlbGVjdGVkJykpe1xyXG4gICAgICBlbC5jbGljaygpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTmljZVNlbGVjdDtcclxuZXhwb3J0IGZ1bmN0aW9uIGJpbmQoZWwsIG9wdGlvbnMpIHtcclxuICByZXR1cm4gbmV3IE5pY2VTZWxlY3QoZWwsIG9wdGlvbnMpO1xyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///462\n\n}')}},__webpack_require__={d:(c,l)=>{for(var t in l)__webpack_require__.o(l,t)&&!__webpack_require__.o(c,t)&&Object.defineProperty(c,t,{enumerable:!0,get:l[t]})},o:(c,l)=>Object.prototype.hasOwnProperty.call(c,l),r:c=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}},__webpack_exports__={};return __webpack_modules__[462](0,__webpack_exports__,__webpack_require__),__webpack_exports__})());